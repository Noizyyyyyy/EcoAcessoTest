<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco Acesso - Cadastro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reset e estilos gerais */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --verde-principal: #2e7d32;
            --verde-escuro: #1b5e20;
            --verde-claro: #4caf50;
            --verde-muito-claro: #c8e6c9;
            --verde-super-claro: #e8f5e9;
            --branco: #ffffff;
            --cinza-claro: #f5f5f5;
            --cinza-escuro: #424242;
            --amarelo: #ffeb3b;
            --laranja: #ff9800;
            --azul: #2196f3;
            --marrom-claro: #d7ccc8;
            --marrom: #8d6e63;
        }

        body {
            background: linear-gradient(135deg, var(--verde-super-claro), var(--verde-muito-claro));
            color: var(--cinza-escuro);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1.5rem;
        }

        /* Container principal centralizado - MAIS LARGO */
        .main-container {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* CABEÇALHO ATUALIZADO - Design mais orgânico */
        header {
            background: linear-gradient(135deg, #3e8e41, #2e7d32, #1b5e20);
            color: var(--branco);
            padding: 2rem 2.5rem;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            border-radius: 18px;
            margin-bottom: 2rem;
            width: 100%;
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Efeito de textura orgânica no cabeçalho */
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.1) 2%, transparent 10%),
                radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.1) 2%, transparent 10%),
                radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.1) 2%, transparent 10%);
            background-size: 300px 300px;
            z-index: 1;
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .logo {
            font-size: 2.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.8rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            font-family: 'Georgia', serif;
            letter-spacing: 0.5px;
        }

        .logo i {
            margin-right: 15px;
            font-size: 3.2rem;
            filter: drop-shadow(2px 2px 3px rgba(0, 0, 0, 0.3));
            color: #c8e6c9;
        }

        .slogan {
            font-style: italic;
            opacity: 0.95;
            font-size: 1.3rem;
            margin-bottom: 1.2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        /* Elementos decorativos orgânicos */
        .organic-decoration {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 1rem;
        }

        .leaf {
            width: 40px;
            height: 25px;
            background-color: #a5d6a7;
            border-radius: 50% 0 50% 0;
            transform: rotate(-15deg);
            position: relative;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
        }

        .leaf::before {
            content: '';
            position: absolute;
            width: 30px;
            height: 20px;
            background-color: #81c784;
            border-radius: 50% 0 50% 0;
            top: 2px;
            left: 5px;
        }

        .leaf:nth-child(2) {
            transform: rotate(15deg);
            background-color: #81c784;
        }

        .leaf:nth-child(2)::before {
            background-color: #66bb6a;
        }

        .leaf:nth-child(3) {
            transform: rotate(-5deg);
            background-color: #66bb6a;
        }

        .leaf:nth-child(3)::before {
            background-color: #4caf50;
        }

        /* Título da página */
        .page-title {
            text-align: center;
            margin-bottom: 1.8rem;
            color: var(--verde-escuro);
            width: 100%;
        }

        .page-title h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .page-title p {
            font-size: 1.1rem;
            color: var(--cinza-escuro);
        }

        /* Layout do formulário - MAIS LARGO */
        .form-wrapper {
            width: 100%;
            background-color: var(--branco);
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .form-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--verde-claro), var(--verde-principal), var(--verde-escuro));
        }

        /* Layout de colunas para formulário mais largo */
        .form-columns {
            display: flex;
            gap: 1.5rem;
        }

        .form-column {
            flex: 1;
        }

        /* Estilos do formulário */
        .form-section {
            margin-bottom: 1.8rem;
        }

        .form-section h3 {
            color: var(--verde-principal);
            margin-bottom: 1.2rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--verde-muito-claro);
            display: flex;
            align-items: center;
            font-size: 1.2rem;
        }

        .form-section h3 i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .form-group {
            margin-bottom: 1.2rem;
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--cinza-escuro);
            font-size: 0.95rem;
        }

        .required::after {
            content: " *";
            color: var(--laranja);
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 0.9rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            background-color: var(--branco);
        }

        input:focus,
        select:focus,
        textarea:focus {
            border-color: var(--verde-claro);
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        input.error,
        select.error,
        textarea.error {
            border-color: #f44336;
            box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.2);
        }

        .error-message {
            color: #f44336;
            font-size: 0.8rem;
            margin-top: 0.3rem;
            display: none;
        }

        .checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            margin-bottom: 0.8rem;
        }

        .checkbox-group input {
            width: auto;
            margin-top: 0.2rem;
        }

        .checkbox-group label {
            margin-bottom: 0;
            font-size: 0.95rem;
        }

        button {
            background: linear-gradient(135deg, var(--verde-principal), var(--verde-escuro));
            color: var(--branco);
            border: none;
            padding: 1.2rem 2.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
            font-weight: 600;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 12px rgba(46, 125, 50, 0.3);
            margin-top: 1.5rem;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(46, 125, 50, 0.4);
        }

        button:active {
            transform: translateY(-1px);
        }

        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Mensagens de sucesso/erro */
        .message {
            padding: 1.2rem;
            border-radius: 8px;
            margin-bottom: 1.8rem;
            display: none;
            animation: fadeIn 0.5s ease;
            width: 100%;
            text-align: center;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.success {
            background-color: #e8f5e9;
            border-left: 4px solid var(--verde-claro);
            color: var(--verde-escuro);
        }

        .message.error {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
            color: #c62828;
        }

        /* Rodapé */
        footer {
            background: linear-gradient(135deg, var(--verde-escuro), var(--verde-principal));
            color: var(--branco);
            text-align: center;
            padding: 1.2rem;
            margin-top: 1.8rem;
            border-radius: 12px;
            width: 100%;
            font-size: 0.9rem;
        }

        /* Utilitários */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, .3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .success-checkmark {
            display: inline-block;
            width: 20px;
            height: 20px;
            transform: rotate(45deg);
        }

        .success-checkmark:before {
            content: '';
            position: absolute;
            width: 4px;
            height: 10px;
            background-color: white;
            left: 10px;
            top: 6px;
        }

        .success-checkmark:after {
            content: '';
            position: absolute;
            width: 4px;
            height: 4px;
            background-color: white;
            left: 8px;
            top: 12px;
        }

        .cep-loading {
            position: absolute;
            right: 12px;
            top: 38px;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(76, 175, 80, 0.3);
            border-radius: 50%;
            border-top-color: var(--verde-claro);
            animation: spin 1s ease-in-out infinite;
            display: none;
        }

        /* Barra de progresso */
        .progress-container {
            width: 100%;
            margin-bottom: 1.8rem;
        }

        .progress-bar {
            height: 8px;
            background-color: var(--verde-muito-claro);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--verde-claro), var(--verde-principal));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .progress-text {
            text-align: center;
            font-size: 0.9rem;
            color: var(--verde-escuro);
            margin-top: 0.5rem;
        }

        /* Indicador de CEP válido */
        .cep-valid {
            position: absolute;
            right: 12px;
            top: 38px;
            color: var(--verde-claro);
            display: none;
        }

        /* Campos lado a lado */
        .form-row {
            display: flex;
            gap: 1rem;
        }

        .form-row .form-group {
            flex: 1;
        }

        /* Responsividade para telas menores */
        @media (max-width: 768px) {
            .form-columns {
                flex-direction: column;
                gap: 0;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .main-container {
                max-width: 100%;
            }

            .form-wrapper {
                padding: 1.8rem;
            }

            header {
                padding: 1.5rem 2rem;
            }

            .logo {
                font-size: 2.2rem;
            }

            .logo i {
                font-size: 2.5rem;
            }

            .organic-decoration {
                gap: 15px;
            }

            .leaf {
                width: 30px;
                height: 20px;
            }
        }

        @media (max-width: 480px) {
            .form-wrapper {
                padding: 1.5rem;
            }

            header {
                padding: 1.2rem 1.5rem;
            }

            .logo {
                font-size: 1.8rem;
            }

            .logo i {
                font-size: 2rem;
            }

            .organic-decoration {
                gap: 10px;
            }

            .leaf {
                width: 25px;
                height: 15px;
            }
        }
    </style>
</head>

<body>
    <div class="main-container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-seedling"></i> Eco Acesso
                </div>
                <div class="slogan">
                    <p>Conectando pessoas à sustentabilidade</p>
                </div>
                <div class="organic-decoration">
                    <div class="leaf"></div>
                    <div class="leaf"></div>
                    <div class="leaf"></div>
                </div>
            </div>
        </header>

        <div class="page-title">
            <h1>Junte-se à Nossa Comunidade</h1>
            <p>Cadastre-se e faça parte da mudança por um planeta mais sustentável</p>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress" id="progress-bar"></div>
            </div>
            <div class="progress-text" id="progress-text">0% completo</div>
        </div>

        <div class="message success" id="success-message">
        <strong><i class="fas fa-check-circle"></i> Cadastro realizado com sucesso!</strong><br>
    Sua conta foi ativada automaticamente. Você será redirecionado para a página inicial.
</div>

        <div class="message error" id="error-message">
            <strong><i class="fas fa-exclamation-circle"></i> Erro no cadastro!</strong><br>
            Verifique os campos destacados em vermelho.
        </div>

        <div class="form-wrapper">
            <form id="cadastro-form">
                <div class="form-columns">
                    <div class="form-column">
                        <div class="form-section">
                            <h3><i class="fas fa-user"></i> Informações Pessoais</h3>

                            <div class="form-group">
                                <label for="nome" class="required">Nome Completo</label>
                                <input type="text" id="nome" name="nome" required placeholder="Seu nome completo">
                                <div class="error-message" id="nome-error">Por favor, insira seu nome completo</div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="email" class="required">E-mail</label>
                                    <input type="email" id="email" name="email" required placeholder="seu@email.com">
                                    <div class="error-message" id="email-error">Por favor, insira um e-mail válido</div>
                                </div>

                                <div class="form-group">
                                    <label for="telefone" class="required">Telefone</label>
                                    <input type="tel" id="telefone" name="telefone" required
                                        placeholder="(11) 99999-9999">
                                    <div class="error-message" id="telefone-error">Por favor, insira um telefone válido
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="data-nascimento" class="required">Data de Nascimento</label>
                                    <input type="date" id="data-nascimento" name="data-nascimento" >
                                </div>

                                <div class="form-group">
                                    <label for="cpf" class="required">CPF</label>
                                    <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00">
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3><i class="fas fa-lock"></i> Segurança</h3>

                            <div class="form-group">
                                <label for="senha" class="required">Senha</label>
                                <input type="password" id="senha" name="senha" required
                                    placeholder="Crie uma senha segura">
                                <div class="error-message" id="senha-error">Por favor, crie uma senha</div>
                            </div>

                            <div class="form-group">
                                <label for="confirmar-senha" class="required">Confirmar Senha</label>
                                <input type="password" id="confirmar-senha" name="confirmar-senha" required
                                    placeholder="Digite a senha novamente">
                                <div class="error-message" id="confirmar-senha-error">As senhas não coincidem</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-column">
                        <div class="form-section">
                            <h3><i class="fas fa-map-marker-alt"></i> Endereço</h3>

                            <div class="form-group">
                                <label for="cep">CEP</label>
                                <input type="text" id="cep" name="cep" placeholder="00000-000" maxlength="9">
                                <div class="cep-loading" id="cep-loading"></div>
                                <i class="fas fa-check cep-valid" id="cep-valid"></i>
                                <div class="error-message" id="cep-error">CEP inválido ou não encontrado</div>
                            </div>

                            <div class="form-group">
                                <label for="logradouro">Logradouro</label>
                                <input type="text" id="logradouro" name="logradouro" placeholder="Rua, Avenida, etc.">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="numero">Número</label>
                                    <input type="text" id="numero" name="numero" placeholder="123">
                                </div>

                                <div class="form-group">
                                    <label for="complemento">Complemento</label>
                                    <input type="text" id="complemento" name="complemento"
                                        placeholder="Apto, Bloco, etc.">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="bairro">Bairro</label>
                                <input type="text" id="bairro" name="bairro" placeholder="Seu bairro">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="cidade">Cidade</label>
                                    <input type="text" id="cidade" name="cidade" placeholder="Sua cidade">
                                </div>

                                <div class="form-group">
                                    <label for="estado">Estado</label>
                                    <select id="estado" name="estado">
                                        <option value="">Selecione seu estado</option>
                                        <option value="AC">Acre</option>
                                        <option value="AL">Alagoas</option>
                                        <option value="AP">Amapá</option>
                                        <option value="AM">Amazonas</option>
                                        <option value="BA">Bahia</option>
                                        <option value="CE">Ceará</option>
                                        <option value="DF">Distrito Federal</option>
                                        <option value="ES">Espírito Santo</option>
                                        <option value="GO">Goiás</option>
                                        <option value="MA">Maranhão</option>
                                        <option value="MT">Mato Grosso</option>
                                        <option value="MS">Mato Grosso do Sul</option>
                                        <option value="MG">Minas Gerais</option>
                                        <option value="PA">Pará</option>
                                        <option value="PB">Paraíba</option>
                                        <option value="PR">Paraná</option>
                                        <option value="PE">Pernambuco</option>
                                        <option value="PI">Piauí</option>
                                        <option value="RJ">Rio de Janeiro</option>
                                        <option value="RN">Rio Grande do Norte</option>
                                        <option value="RS">Rio Grande do Sul</option>
                                        <option value="RO">Rondônia</option>
                                        <option value="RR">Roraima</option>
                                        <option value="SC">Santa Catarina</option>
                                        <option value="SP">São Paulo</option>
                                        <option value="SE">Sergipe</option>
                                        <option value="TO">Tocantins</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SEÇÃO DE TERMOS NO FINAL -->
                <div class="form-section">
                    <h3><i class="fas fa-file-contract"></i> Termos e Comunicação</h3>

                    <div class="checkbox-group">
                        <input type="checkbox" id="termos" name="termos" required>
                        <label for="termos" class="required">Aceito os Termos de Uso e Política de Privacidade</label>
                        <div class="error-message" id="termos-error">Você deve aceitar os termos para continuar</div>
                    </div>
                </div>

                <button type="submit" id="submit-btn">
                    <span id="btn-text">Finalizar Cadastro</span>
                    <div class="loading" id="btn-loading" style="display: none;"></div>
                    <div class="success-checkmark" id="btn-success" style="display: none;"></div>
                </button>
            </form>
        </div>

        <footer>
            <p>&copy; 2025 Eco Acesso - Todos os direitos reservados | 
                <a href="Politica.html" style="color: var(--branco); "> Política de Privacidade</a>        |

                <a href="termos.html" style="color: var(--branco);">Termos de Uso</a></p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('cadastro-form');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const successMessage = document.getElementById('success-message');
            const errorMessage = document.getElementById('error-message');
            const submitBtn = document.getElementById('submit-btn');
            const btnText = document.getElementById('btn-text');
            const btnLoading = document.getElementById('btn-loading');
            const btnSuccess = document.getElementById('btn-success');
            const cepLoading = document.getElementById('cep-loading');
            const cepValid = document.getElementById('cep-valid');

            // Base de dados expandida de CEPs
            const cepDatabase = {
                // São Paulo
                '01001-000': { logradouro: '', bairro: '', cidade: 'São Paulo', estado: 'SP' },
                '01310-000': { logradouro: '', bairro: '', cidade: 'São Paulo', estado: 'SP' },
                '01410-000': { logradouro: '', bairro: '', cidade: 'São Paulo', estado: 'SP' },
                '04001-000': { logradouro: '', bairro: '', cidade: 'São Paulo', estado: 'SP' },
                '05407-000': { logradouro: '', bairro: '', cidade: 'São Paulo', estado: 'SP' },

                // Rio de Janeiro
                '20040-000': { logradouro: '', bairro: '', cidade: 'Rio de Janeiro', estado: 'RJ' },
                '22010-000': { logradouro: '', bairro: '', cidade: 'Rio de Janeiro', estado: 'RJ' },
                '22250-000': { logradouro: '', bairro: '', cidade: 'Rio de Janeiro', estado: 'RJ' },
                '22410-000': { logradouro: '', bairro: '', cidade: 'Rio de Janeiro', estado: 'RJ' },

                // Minas Gerais
                '30112-000': { logradouro: '', bairro: '', cidade: 'Belo Horizonte', estado: 'MG' },
                '30130-000': { logradouro: '', bairro: '', cidade: 'Belo Horizonte', estado: 'MG' },
                '30380-000': { logradouro: '', bairro: '', cidade: 'Belo Horizonte', estado: 'MG' },

                // Bahia
                '40010-000': { logradouro: '', bairro: 'Centro', cidade: 'Salvador', estado: 'BA' },
                '40140-000': { logradouro: 'Avenida Sete de Setembro', bairro: 'Corredor da Vitória', cidade: 'Salvador', estado: 'BA' },
                '41720-000': { logradouro: 'Avenida ACM', bairro: 'Itaigara', cidade: 'Salvador', estado: 'BA' },

                // Pernambuco
                '50010-000': { logradouro: '', bairro: '', cidade: 'Recife', estado: 'PE' },
                '51010-000': { logradouro: '', bairro: '', cidade: 'Recife', estado: 'PE' },
                '52010-000': { logradouro: '', bairro: '', cidade: 'Recife', estado: 'PE' },

                // Ceará
                '63380-000': { logradouro: '', bairro: '', cidade: 'Barro', estado: 'CE' },
                '60110-000': { logradouro: '', bairro: '', cidade: 'Fortaleza', estado: 'CE' },
                '60160-000': { logradouro: '', bairro: '', cidade: 'Fortaleza', estado: 'CE' },

                // Distrito Federal
                '70002-000': { logradouro: '', bairro: '', cidade: 'Brasília', estado: 'DF' },
                '70333-000': { logradouro: '', bairro: '', cidade: 'Brasília', estado: 'DF' },
                '70770-000': { logradouro: '', bairro: '', cidade: 'Brasília', estado: 'DF' },

                // Paraná
                '80010-000': { logradouro: '', bairro: '', cidade: 'Curitiba', estado: 'PR' },
                '80510-000': { logradouro: '', bairro: '', cidade: 'Curitiba', estado: 'PR' },
                '80710-000': { logradouro: '', bairro: '', cidade: 'Curitiba', estado: 'PR' },

                // Rio Grande do Sul
                '90010-000': { logradouro: '', bairro: '', cidade: 'Porto Alegre', estado: 'RS' },
                '90450-000': { logradouro: '', bairro: '', cidade: 'Porto Alegre', estado: 'RS' },
                '90570-000': { logradouro: '', bairro: '', cidade: 'Porto Alegre', estado: 'RS' },

                // Outras capitais
                '69005-000': { logradouro: '', bairro: '', cidade: 'Manaus', estado: 'AM' },
                '57010-000': { logradouro: '', bairro: '', cidade: 'Maceió', estado: 'AL' },
                '64000-000': { logradouro: '', bairro: '', cidade: 'Teresina', estado: 'PI' },
                '78005-000': { logradouro: '', bairro: '', cidade: 'Cuiabá', estado: 'MT' },
                '88010-000': { logradouro: '', bairro: '', cidade: 'Florianópolis', estado: 'SC' }
            };

            // Atualizar barra de progresso
            function updateProgressBar() {
                const requiredFields = form.querySelectorAll('input[required]');
                const filledFields = Array.from(requiredFields).filter(field => {
                    if (field.type === 'checkbox') {
                        return field.checked;
                    }
                    return field.value.trim() !== '';
                });
                const progress = (filledFields.length / requiredFields.length) * 100;
                progressBar.style.width = `${progress}%`;
                progressText.textContent = `${Math.round(progress)}% completo`;
            }

            // Validar campo individual
            function validateField(field) {
                const errorElement = document.getElementById(`${field.id}-error`);

                if (field.hasAttribute('required') && field.value.trim() === '' && field.type !== 'checkbox') {
                    field.classList.add('error');
                    if (errorElement) errorElement.style.display = 'block';
                    return false;
                }

                if (field.type === 'checkbox' && field.hasAttribute('required') && !field.checked) {
                    field.parentElement.classList.add('error');
                    if (errorElement) errorElement.style.display = 'block';
                    return false;
                }

                if (field.type === 'email' && field.value.trim() !== '') {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(field.value)) {
                        field.classList.add('error');
                        if (errorElement) errorElement.style.display = 'block';
                        return false;
                    }
                }

                if (field.id === 'telefone' && field.value.trim() !== '') {
                    const telefoneRegex = /^\(\d{2}\) \d{4,5}-\d{4}$/;
                    if (!telefoneRegex.test(field.value)) {
                        field.classList.add('error');
                        if (errorElement) errorElement.style.display = 'block';
                        return false;
                    }
                }

                // Validação de confirmação de senha
                if (field.id === 'confirmar-senha' && field.value.trim() !== '') {
                    const senha = document.getElementById('senha').value;
                    if (field.value !== senha) {
                        field.classList.add('error');
                        if (errorElement) errorElement.style.display = 'block';
                        return false;
                    }
                }

                field.classList.remove('error');
                if (field.type === 'checkbox') {
                    field.parentElement.classList.remove('error');
                }
                if (errorElement) errorElement.style.display = 'none';
                return true;
            }

            // Validar formulário completo
            function validateForm() {
                let isValid = true;
                const requiredFields = form.querySelectorAll('input[required]');

                requiredFields.forEach(field => {
                    if (!validateField(field)) {
                        isValid = false;
                    }
                });

                return isValid;
            }

            // Event listeners para validação em tempo real
            const formFields = form.querySelectorAll('input, select, textarea');
            formFields.forEach(field => {
                field.addEventListener('blur', () => {
                    validateField(field);
                    updateProgressBar();
                });

                field.addEventListener('input', () => {
                    updateProgressBar();
                });
            });

            // Formatação do telefone
            const telefoneField = document.getElementById('telefone');
            telefoneField.addEventListener('input', function (e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) value = value.substring(0, 11);

                if (value.length > 0) {
                    if (value.length <= 2) {
                        value = `(${value}`;
                    } else if (value.length <= 7) {
                        value = `(${value.substring(0, 2)}) ${value.substring(2)}`;
                    } else {
                        value = `(${value.substring(0, 2)}) ${value.substring(2, 7)}-${value.substring(7)}`;
                    }
                }

                e.target.value = value;
            });

            // Formatação do CEP
            const cepField = document.getElementById('cep');
            cepField.addEventListener('input', function (e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 8) value = value.substring(0, 8);

                if (value.length > 5) {
                    value = `${value.substring(0, 5)}-${value.substring(5)}`;
                }

                e.target.value = value;

                // Esconder indicadores quando o CEP for alterado
                cepValid.style.display = 'none';
                document.getElementById('cep-error').style.display = 'none';
                cepField.classList.remove('error');
            });

            // Buscar endereço pelo CEP
            cepField.addEventListener('blur', function () {
                const cep = this.value.replace(/\D/g, '');

                if (cep.length === 8) {
                    cepLoading.style.display = 'block';

                    // Simular busca de CEP com timeout
                    setTimeout(() => {
                        cepLoading.style.display = 'none';

                        const formattedCep = `${cep.substring(0, 5)}-${cep.substring(5)}`;
                        const endereco = cepDatabase[formattedCep];

                        if (endereco) {
                            document.getElementById('logradouro').value = endereco.logradouro;
                            document.getElementById('bairro').value = endereco.bairro;
                            document.getElementById('cidade').value = endereco.cidade;
                            document.getElementById('estado').value = endereco.estado;
                            document.getElementById('cep-error').style.display = 'none';
                            cepField.classList.remove('error');
                            cepValid.style.display = 'block';
                        } else {
                            document.getElementById('cep-error').style.display = 'block';
                            cepField.classList.add('error');
                            cepValid.style.display = 'none';
                        }
                    }, 1000);
                }
            });

            // Envio do formulário
            // Envio do formulário
            form.addEventListener('submit', async function (e) { // Adicionado 'async' aqui
                e.preventDefault();

                // Esconder mensagens anteriores e limpar erros visuais
                successMessage.style.display = 'none';
                errorMessage.style.display = 'none';

                // Se a validação do Front-end falhar
                if (!validateForm()) {
                    errorMessage.style.display = 'block';
                    const firstError = form.querySelector('.error');
                    if (firstError) {
                        firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                    return; // Para a execução se houver erros de validação no front-end
                }

                // Mostrar estado de carregamento no botão
                btnText.style.display = 'none';
                btnLoading.style.display = 'inline-block';
                submitBtn.disabled = true;

                // 1. Coleta e formata os dados
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());

                // Processar os checkboxes de interesse
                const interesses = Array.from(form.querySelectorAll('input[name="interesses"]:checked'))
                    .map(cb => cb.value);
                data.interesses = interesses.join(','); // Ex: "reciclagem,energia,educacao"

                // Ajustar os booleans dos termos
                data.termos_aceitos = !!data.termos; // Converte para boolean (true se marcado)
                data.receber_newsletter = !!data.newsletter;
                data.receber_eventos = !!data.eventos;

                // Remove os campos de checkbox para evitar duplicidade na API
                delete data.termos;
                delete data.newsletter;
                delete data.eventos;

                let response; // Declarar a variável fora do try/catch

                try {
                    // 2. Envio REAL dos dados para a Serverless Function
                    response = await fetch('/api/cadastrar', { // Caminho para a Serverless Function
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data),
                    });

                    // 3. Processa a resposta do servidor
                    const result = await response.json();

                    if (response.ok) { // Status 200-299 (Sucesso)
                        // Ação de Sucesso: Exibe a mensagem e prepara o redirecionamento
                        btnLoading.style.display = 'none';
                        btnSuccess.style.display = 'inline-block';

                        // 1. Exibir a mensagem de sucesso e rolar para o topo
                        successMessage.style.display = 'block';
                        window.scrollTo({ top: 0, behavior: 'smooth' });

                        // 2. Redirecionar para a página inicial após 3 segundos
                        setTimeout(() => {
                            window.location.href = '/'; // <<-- AQUI ESTÁ O REDIRECIONAMENTO
                        }, 3000); // 3000ms = 3 segundos de espera

                    } else { // Status 400 ou 500 (Erro)
                        console.error('Erro no servidor:', result.error);
                        errorMessage.querySelector('strong').textContent = `Erro no cadastro!`;
                        errorMessage.querySelector('br').nextSibling.textContent = ` ${result.error || 'Ocorreu um erro desconhecido.'}`;
                        errorMessage.style.display = 'block';
                    }

                } catch (error) {
                    console.error('Erro na requisição (rede ou CORS):', error);
                    errorMessage.querySelector('strong').textContent = `Falha na Conexão!`;
                    errorMessage.querySelector('br').nextSibling.textContent = ` Não foi possível enviar os dados ao servidor.`;
                    errorMessage.style.display = 'block';

                } finally {
                    // Garantir que o botão volte ao estado normal em caso de erro (quando não houve sucesso/redirecionamento)
                    if (!response || !response.ok) {
                        btnLoading.style.display = 'none';
                        btnText.style.display = 'inline';
                        submitBtn.disabled = false;
                    }
                }
            });
        })